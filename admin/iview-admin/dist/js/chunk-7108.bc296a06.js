(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7108"],{"7e1e":function(t,e,a){"use strict";a.d(e,"f",function(){return o}),a.d(e,"d",function(){return r}),a.d(e,"e",function(){return i}),a.d(e,"a",function(){return c}),a.d(e,"c",function(){return d}),a.d(e,"b",function(){return l}),a.d(e,"i",function(){return p}),a.d(e,"j",function(){return u}),a.d(e,"h",function(){return f}),a.d(e,"l",function(){return m}),a.d(e,"g",function(){return h}),a.d(e,"k",function(){return _});a("cadf"),a("551c"),a("097d");var n=a("66df"),s=a("c276"),o=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"Calculation.php",data:e,method:"post"})},r=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"contract_list.php",data:e,method:"post"})},i=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"tree_operation.php",data:e,method:"post"})},c=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"update_tender_status.php",data:e,method:"post"})},d=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"supervise/providerUpdate.php",data:e,method:"post"})},l=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"update_project_status.php",data:e,method:"post"})},p=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"contract_img_attr.php ",data:e,method:"post"})},u=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"deposit_contract_imgs.php",data:e,method:"post"})},f=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"atlas_list.php",data:e,method:"post"})},m=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"send_img_url.php",data:e,method:"post"})},h=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"supervise/checkoutCompany.php",data:e,method:"post"})},_=function(t){var e=Object(s["c"])(t);return n["a"].request({url:"supervise/contract_info.php",data:e,method:"post"})}},"9ff1":function(t,e,a){},efbd:function(t,e,a){"use strict";var n=a("9ff1"),s=a.n(n);s.a},f55c:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imgwarp,expression:"imgwarp"}],staticClass:"img-warp",on:{click:t.closeImgWarp}},[a("div",{staticClass:"img-warp-inner"},[a("Carousel",{staticClass:"dengpostition",attrs:{loop:"",width:375},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.warpImgs,function(e){return a("CarouselItem",{key:t.index},[a("div",{staticClass:"demo-carousel"},[a("img",{attrs:{src:"/admin/"+e.substring(1),alt:""}})])])}))],1)]),t.bidList&&0!=t.bidList.length?a("div",{staticClass:"bind-one"},[a("Tabs",{attrs:{animated:!1}},[a("TabPane",{attrs:{label:t.label1}},[t._l(t.bidList,function(e,n){return a("Card",{directives:[{name:"show",rawName:"v-show",value:1==e.tender_status&&0==e.adoption_status,expression:"item.tender_status == 1 && item.adoption_status == 0"}],key:n},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"left-img-warp",attrs:{span:"3"}},[a("img",{attrs:{src:e.tree_imgs?"/admin/"+e.tree_imgs[0].substring(1):"",alt:""},on:{click:function(e){t.showImgWarp(n)}}})]),a("Col",{attrs:{span:"13"}},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("￥"+t._s(e.tree_price))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_num)+"株")]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_address?e.tree_address:"无地址"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.name:"无姓名"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.phone:"无电话"))])]),a("Col",{attrs:{span:"8"}},[a("Button",{directives:[{name:"show",rawName:"v-show",value:2!=e.tender_status,expression:"item.tender_status != 2"}],staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){t.recommend(n)}}},[t._v("\n                推荐\n              ")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:3!=e.tender_status,expression:"item.tender_status != 3"}],attrs:{type:"error"},on:{click:function(e){t.abandon(n)}}},[t._v("舍弃")])],1)],1)],1)}),a("Card",{directives:[{name:"show",rawName:"v-show",value:0==t.emptyTips(1),expression:"emptyTips(1) == 0"}]},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("待审核信息为空")])])],2),a("TabPane",{attrs:{label:t.label2}},[t._l(t.bidList,function(e,n){return a("Card",{directives:[{name:"show",rawName:"v-show",value:1!=e.tender_status&&0==e.adoption_status,expression:"item.tender_status != 1 && item.adoption_status == 0"}],key:n},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"left-img-warp",attrs:{span:"3"}},[a("img",{attrs:{src:e.tree_imgs?"/admin/"+e.tree_imgs[0].substring(1):"",alt:""},on:{click:function(e){t.showImgWarp(n)}}})]),a("Col",{attrs:{span:"13"}},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("￥"+t._s(e.tree_price))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_num)+"株")]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_address?e.tree_address:"无地址"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.name:"无姓名"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.phone:"无电话"))])]),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{shape:"circle",disabled:""}},[t._v(t._s(2==e.tender_status?"已推荐":"已舍弃"))])],1)],1)],1)}),a("Card",{directives:[{name:"show",rawName:"v-show",value:0==t.emptyTips(2),expression:"emptyTips(2) == 0"}]},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("已审核信息为空")])])],2),a("TabPane",{attrs:{label:t.label3}},[t._l(t.bidList,function(e,n){return a("Card",{directives:[{name:"show",rawName:"v-show",value:1==e.adoption_status&&0==e.provider_status,expression:"item.adoption_status == 1 && item.provider_status == 0"}],key:n},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"left-img-warp",attrs:{span:"3"}},[a("img",{attrs:{src:e.tree_imgs?"/admin/"+e.tree_imgs[0].substring(1):"",alt:""},on:{click:function(e){t.showImgWarp(n)}}})]),a("Col",{attrs:{span:"13"}},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("￥"+t._s(e.tree_price))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_num)+"株")]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_address?e.tree_address:"无地址"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.name:"无姓名"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.phone:"无电话"))])]),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"info"},on:{click:function(e){t.becomeSupplier(n)}}},[t._v("成为供应商")])],1)],1)],1)}),a("Card",{directives:[{name:"show",rawName:"v-show",value:0==t.emptyTips(3),expression:"emptyTips(3) == 0"}]},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("采用信息为空")])])],2),a("TabPane",{attrs:{label:t.label4}},[t._l(t.bidList,function(e,n){return a("Card",{directives:[{name:"show",rawName:"v-show",value:1==e.adoption_status&&1==e.provider_status,expression:"item.adoption_status == 1 && item.provider_status == 1"}],key:n},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticClass:"left-img-warp",attrs:{span:"3"}},[a("img",{attrs:{src:e.tree_imgs?"/admin/"+e.tree_imgs[0].substring(1):"",alt:""},on:{click:function(e){t.showImgWarp(n)}}})]),a("Col",{attrs:{span:"13"}},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("￥"+t._s(e.tree_price))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_num)+"株")]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_address?e.tree_address:"无地址"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.name:"无姓名"))]),a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.phone:"无电话"))])]),a("Col",{attrs:{span:"8"}},[a("Button",{staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){t.codeListShow(n)}}},[t._v("二维码管理")]),a("Button",{staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){t.getContract(n)}}},[t._v("下载合同")])],1)],1)],1)}),a("Card",{directives:[{name:"show",rawName:"v-show",value:0==t.emptyTips(4),expression:"emptyTips(4) == 0"}]},[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("供应商信息为空")])])],2)],1)],1):a("div",[a("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("无投标信息")])]),a("Drawer",{attrs:{title:"二维码管理侧边栏",width:50,closable:!1},model:{value:t.codeListStatu,callback:function(e){t.codeListStatu=e},expression:"codeListStatu"}},[a("Input",{staticStyle:{width:"200px"},attrs:{icon:"md-camera",placeholder:"扫码枪扫码添加",autofocus:!0},on:{"on-keydown":t.bindCode},model:{value:t.codeId,callback:function(e){t.codeId=e},expression:"codeId"}}),a("span",{staticStyle:{color:"#ed4014","margin-left":"5px"}},[t._v("*保证输入框处于获取焦点状态，用扫码枪添加")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.codeIdList.length,expression:"codeIdList.length != 0"}]},[a("div",{staticStyle:{position:"relative","text-align":"right",padding:"6px 0"}},[a("div",{staticStyle:{"font-size":"14px",color:"#464c5b",position:"absolute",left:"0",top:"12px"}},[t._v("添加二维码"+t._s(0==t.codeIdList.length?"":"/已添加")),a("Badge",{attrs:{count:t.codeIdList.length,type:"success"}})],1),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error"},on:{click:t.clearCodeIdList}},[t._v("批量清除二维码")]),a("Button",{attrs:{type:"primary"},on:{click:t.addCodeList}},[t._v("批量添加二维码")])],1),a("Table",{attrs:{border:"",columns:t.codeListmodel,data:t.codeIdList}})],1),a("div",[a("div",{staticStyle:{"font-size":"14px",color:"#464c5b",padding:"6px 0"}},[t._v("需要绑定二维码"),a("Badge",{attrs:{count:t.allCodeNum,type:"success"}}),t._v(t._s(0==t.codeData.length?"":"/已绑定")),a("Badge",{attrs:{count:t.codeData.length,type:"success"}})],1),a("Table",{attrs:{border:"",columns:t.codemodel,data:t.codeData}})],1)],1),a("Drawer",{attrs:{title:"个人所在企业信息补录",width:35,placement:"right",closable:!1},on:{"on-close":t.clearContractInfoDate},model:{value:t.contractInfoWarp,callback:function(e){t.contractInfoWarp=e},expression:"contractInfoWarp"}},[a("Form",{ref:"contractInfo",attrs:{model:t.contractInfoDate,rules:t.contractInfoRule,"label-width":80}},[a("FormItem",{attrs:{label:"公司名称",prop:"company_name"}},[a("Input",{attrs:{placeholder:"公司名称"},model:{value:t.contractInfoDate.company_name,callback:function(e){t.$set(t.contractInfoDate,"company_name",e)},expression:"contractInfoDate.company_name"}})],1),a("FormItem",{attrs:{label:"法人代表",prop:"representative"}},[a("Input",{attrs:{placeholder:"法人代表"},model:{value:t.contractInfoDate.representative,callback:function(e){t.$set(t.contractInfoDate,"representative",e)},expression:"contractInfoDate.representative"}})],1),a("FormItem",{attrs:{label:"开户银行",prop:"open_bank"}},[a("Input",{attrs:{placeholder:"开户银行"},model:{value:t.contractInfoDate.open_bank,callback:function(e){t.$set(t.contractInfoDate,"open_bank",e)},expression:"contractInfoDate.open_bank"}})],1),a("FormItem",{attrs:{label:"银行账户",prop:"bank_num"}},[a("Input",{attrs:{placeholder:"银行账户"},model:{value:t.contractInfoDate.bank_num,callback:function(e){t.$set(t.contractInfoDate,"bank_num",e)},expression:"contractInfoDate.bank_num"}})],1),a("FormItem",{attrs:{label:"税号",prop:"duty_paragraph"}},[a("Input",{attrs:{placeholder:"税号"},model:{value:t.contractInfoDate.duty_paragraph,callback:function(e){t.$set(t.contractInfoDate,"duty_paragraph",e)},expression:"contractInfoDate.duty_paragraph"}})],1),a("FormItem",{attrs:{label:"地址",prop:"address"}},[a("Input",{attrs:{placeholder:"地址"},model:{value:t.contractInfoDate.address,callback:function(e){t.$set(t.contractInfoDate,"address",e)},expression:"contractInfoDate.address"}})],1),a("FormItem",{attrs:{label:"联系人",prop:"contacts"}},[a("Input",{attrs:{placeholder:"联系人"},model:{value:t.contractInfoDate.contacts,callback:function(e){t.$set(t.contractInfoDate,"contacts",e)},expression:"contractInfoDate.contacts"}})],1),a("FormItem",{attrs:{label:"微信绑定手机号",prop:"tel"}},[a("Input",{attrs:{placeholder:"微信绑定手机号"},model:{value:t.contractInfoDate.tel,callback:function(e){t.$set(t.contractInfoDate,"tel",e)},expression:"contractInfoDate.tel"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("contractInfo")}}},[t._v("绑定信息下载合同")])],1)],1)],1)],1)},s=[],o=(a("28a5"),a("ac6a"),a("cadf"),a("551c"),a("097d"),a("7e1e")),r=a("66df"),i=a("c276"),c=function(t){var e=Object(i["c"])(t);return r["a"].request({url:"supervise/insert_tree_maps.php",data:e,method:"post"})},d=function(t){var e=Object(i["c"])(t);return r["a"].request({url:"supervise/codeList.php",data:e,method:"post"})},l={props:{params:Object},data:function(){var t=this;return{codeListStatu:!1,contractInfoWarp:!1,contractInfoDate:{company_name:"",representative:"",open_bank:"",bank_num:"",duty_paragraph:"",address:"",contacts:"",tel:""},contractInfoRule:{company_name:[{required:!0,message:"公司名称必填"}],representative:[{required:!0,message:"法人代表必填"}],open_bank:[{required:!0,message:"开户银行必填"}],bank_num:[{required:!0,message:"银行账户必填"}],duty_paragraph:[{required:!0,message:"税号必填"}],address:[{required:!0,message:"地址必填"}],contacts:[{required:!0,message:"联系人必填"}],tel:[{required:!0,message:"微信关联手机号必填"}]},codeListmodel:[{title:"序号",key:"index",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.index+1)])}},{title:"二维码序号",key:"qrcode"},{title:"操作",key:"action",render:function(e,a){return e("div",[e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(e){e.stopPropagation(),window.event.cancelBubble=!0,t.codeListRome(a.index)}}},"删除")])}}],codemodel:[{title:"序号",key:"index",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.index+1)])}},{title:"二维码序号",key:"qrcode"}],codeData:[],codeId:"",codeIdList:[],label1:function(e){return e("div",[e("span","待审核"),e("Badge",{props:{count:0==t.emptyTips(1)?0:t.emptyTips(1)}})])},label2:function(e){return e("div",[e("span","已审核"),e("Badge",{props:{count:0==t.emptyTips(2)?0:t.emptyTips(2)}})])},label3:function(e){return e("div",[e("span","已采用"),e("Badge",{props:{count:0==t.emptyTips(3)?0:t.emptyTips(3)}})])},label4:function(e){return e("div",[e("span","供应商"),e("Badge",{props:{count:0==t.emptyTips(4)?0:t.emptyTips(4)}})])},value1:0,imgwarp:!1,bidList:[],warpImgs:[],abandonValue:"",bidIndex:0,allCodeNum:0}},methods:{clearContractInfoDate:function(){this.contractInfoDate={company_name:"",representative:"",open_bank:"",bank_num:"",duty_paragraph:"",address:"",contacts:"",tel:""},this.$refs["contractInfo"].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=e.contractInfoDate;a.tender_order_id=e.bidList[e.bidIndex].tender_order_id,Object(o["k"])(a).then(function(t){0==t.data.status?(window.location.href=t.data.msg,e.contractInfoWarp=!1):e.$Message.error(t.data.msg)})}else e.$Message.error("根据提示填写信息")})},getContract:function(t){var e=this;this.bidIndex=t;var a={tender_order_id:this.bidList[t].tender_order_id};Object(o["g"])(a).then(function(t){1==t.data.status?e.contractInfoWarp=!0:0==t.data.status&&(window.location.href=t.data.msg)})},codeListRome:function(t){this.codeIdList.splice(t,t+1)},addCodeList:function(){var t=this,e=[];this.codeIdList.forEach(function(t,a,n){e.push(t.qrcode)});var a={tender_order_id:this.bidList[this.bidIndex].tender_order_id,qrcode:e};c(a).then(function(e){0==e.data.status&&(t.codeData=t.codeData.concat(t.codeIdList),t.codeIdList=[])})},clearCodeIdList:function(){this.codeIdList=[]},bindCode:function(t){if(13==t.keyCode&&this.codeId){var e=this.codeId.split("=")[1],a={},n=this.codeIdList;a.qrcode=e,n=n.filter(function(t,a,n){return t.qrcode==e}),0==n.length&&this.codeIdList.unshift(a),this.codeId=""}},codeListShow:function(t){var e=this;this.codeListStatu=!0,this.bidIndex=t;var a={tender_order_id:this.bidList[t].tender_order_id};d(a).then(function(t){e.codeData=t.data.data,e.allCodeNum=t.data.qrcode_sum})},emptyTips:function(t){var e=this.bidList.filter(function(e,a,n){return 1==t?1==e.tender_status&&0==e.adoption_status:2==t?1!=e.tender_status&&0==e.adoption_status:3==t?1==e.adoption_status&&0==e.provider_status:4==t?1==e.adoption_status&&1==e.provider_status:void 0});return e.length},closeImgWarp:function(t){"img-warp-inner"==t.target.className&&(this.imgwarp=!1)},showImgWarp:function(t){var e=this.bidList[t];e.tree_imgs&&(this.warpImgs=e.tree_imgs,this.imgwarp=!0)},becomeSupplier:function(t){var e=this,a=this.bidList[t],n={tender_order_id:a.tender_order_id};Object(o["c"])(n).then(function(a){e.bidList[t].provider_status=1})},abandon:function(t){var e=this;this.abandonValue="",this.$Modal.confirm({title:"舍弃理由",render:function(t){return t("Input",{props:{value:e.abandonValue,autofocus:"autofocus",placeholder:"请输入舍弃理由!"},on:{input:function(t){e.abandonValue=t}}})},onOk:function(){""==e.abandonValue?e.$Message.warning({content:"请填写舍弃理由！"}):e.changeStatus(t,!1)}}),setTimeout(function(){document.getElementsByClassName("ivu-input")[0].focus()},100)},recommend:function(t){var e=this;this.$Modal.confirm({title:"推荐",content:"确定推荐本条投标吗？","ok-text":"推荐",onOk:function(){e.changeStatus(t,!0)}})},changeListOne:function(){this.bidList;this.$emit("changeListOne",this.params.index,this.bidList)},changeStatus:function(t,e){var a=this,n=this.bidList[t],s={tender_order_id:n.tender_order_id,status:e?2:3,remark:e?"":this.abandonValue};Object(o["a"])(s).then(function(n){0==n.data.status?(a.$Message.success({content:"操作成功"}),a.$set(a.bidList[t],"tender_status",e?2:3)):a.$Message.warning({content:"服务器繁忙"})})}},mounted:function(){this.bidList=this.params.row.tender_info,this.changeListOne()},directives:{focus:{inserted:function(t){t.focus()}}}},p=l,u=(a("efbd"),a("2877")),f=Object(u["a"])(p,n,s,!1,null,"3516533c",null);f.options.__file="project-info-extend.vue";e["a"]=f.exports}}]);