(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaa0"],{"26ee":function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",[t.projectInfo?s("Card",[s("div",[s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目："+t._s(t.projectInfo.project_name))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("甲方："+t._s(t.projectInfo.partya_info.company_name))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partya_info.contacts))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partya_info.tel))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("用苗地："+t._s(t.projectInfo.hcity+t.projectInfo.hproper))])])]),s("div",[s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("乙方："+t._s(t.projectInfo.partyb_info.company_name))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partyb_info.contacts))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partyb_info.tel))])]),s("td",[s("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目时间："+t._s(t.projectInfo.project_time))])])])]):t._e(),s("Card",{staticStyle:{width:"600px"}},[s("div",[s("div",[s("div",[t._l(t.uploadList,function(o,i){return s("div",{staticClass:"demo-upload-list"},[[s("img",{attrs:{src:"/admin/"+o}}),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){t.handleView(o)}}}),s("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(o){t.handleRemove(i)}}})],1)]],2)}),s("Upload",{directives:[{name:"show",rawName:"v-show",value:1!=t.uploadList.length,expression:"uploadList.length !=1"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],multiple:"",type:"drag",action:"/admin/contract_images_upload.php"}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),s("Row",{staticStyle:{padding:"15px 0"}},[s("Col",{attrs:{span:"8"}},[s("Dropdown",{staticStyle:{width:"300px"},on:{"on-click":t.clickSelect}},[s("Button",{attrs:{type:"primary"}},[t._v("\n                    "+t._s(t.subdata.contract_attr?t.subdata.contract_attr:"选择类型")+"\n                    "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.contract_attr,function(o,i){return s("DropdownItem",{attrs:{name:i}},[t._v(t._s(o))])}))],1)],1),s("Col",{attrs:{span:"16"}},[s("Input",{attrs:{type:"textarea",rows:1,placeholder:"图片备注"},model:{value:t.subdata.remark,callback:function(o){t.$set(t.subdata,"remark",o)},expression:"subdata.remark"}})],1)],1),s("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(o){t.visible=o},expression:"visible"}},[t.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()])],2)]),s("Button",{attrs:{type:"success",long:""},on:{click:t.subimgwarpshow}},[t._v("上传")])],1)]),s("Card",{staticStyle:{width:"600px"}},[s("div",t._l(t.imgList,function(o,i){return s("Card",[s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[s("Col",{attrs:{span:"4"}},[s("p",{domProps:{textContent:t._s(o.img_kind)}})]),s("Col",{attrs:{span:"8"}},[s("img",{staticClass:"contract-img",staticStyle:{"border-radius":"5px"},attrs:{src:"/admin/"+o.imgs,alt:""},on:{click:function(s){t.handleView(o.imgs)}}})]),s("Col",{attrs:{span:"8"}},[s("p",{domProps:{textContent:t._s(o.remark)}})]),s("Col",{staticStyle:{"text-align":"right"},attrs:{span:"4"}},[s("Button",{attrs:{type:"primary"},on:{click:function(o){t.tuisong(i)}}},[t._v("推送")])],1)],1)],1)}))])],1)])},a=[],e=(s("7f7f"),s("c93e")),n=(s("cadf"),s("551c"),s("097d"),s("7e1e")),c=(s("c276"),s("2f62")),r=s("f55c"),l={components:{expandRow:r["a"]},data:function(){return{projectInfo:{project_id:""},uploadList:[],imgName:"",visible:!1,img_remark:"",contract_attr:{},subdata:{},imgList:[]}},methods:Object(e["a"])({},Object(c["c"])(["setBreadCrumb","setTagNavList","addTag","setLocal","removeTag"]),{tuisong:function(t){var o=this.imgList[t];Object(n["l"])(o).then(function(t){console.log(t)})},clickSelect:function(t){this.$set(this.subdata,"contract_attr",this.contract_attr[t]),this.$set(this.subdata,"contract_index",t)},handleRemove:function(t){var o=this.uploadList;o.splice(t,1),this.uploadList=o},handleView:function(t){this.imgName="/admin/"+t,this.visible=!0},handleSuccess:function(t,o){console.log(t,o),this.uploadList.push(t.data)},subimgwarpshow:function(){var t=this,o={},s=this;console.log(this.uploadList.length,this.subdata.contract_index),0!=this.uploadList.length?(o.imgs=this.uploadList,this.subdata.contract_attr?(o.img_kind=this.subdata.contract_attr,o.project_id=this.projectInfo.project_id,o.remark=this.subdata.remark,Object(n["j"])(o).then(function(i){if(console.log(i.data),0==i.data.status)if(t.$Message.success("上传成功"),t.subdata={},t.uploadList=[],o.contract_imgs_id=i.data.contract_imgs,console.log(s.imgList+"sssss"),s.imgList)s.imgList.push(o);else{var a=[];a.push(o),s.imgList=a}})):this.$Message.warning("请选择类型")):this.$Message.warning("请上传图片")},getImgList:function(){var t=this;Object(n["h"])({project_id:this.projectInfo.project_id}).then(function(o){t.imgList=o.data.data,console.log(t.imgList)}),Object(n["i"])({}).then(function(o){t.contract_attr=o.data})}}),beforeCreate:function(){this.$route.params.projectInfo||this.$router.push({name:"contractList"})},created:function(){this.projectInfo=this.$route.params.projectInfo},mounted:function(){this.getImgList()},beforeDestroy:function(){}},d=l,p=(s("5bde"),s("2877")),u=Object(p["a"])(d,i,a,!1,null,null,null);u.options.__file="contract-img.vue";o["default"]=u.exports},"5bde":function(t,o,s){"use strict";var i=s("8e9c"),a=s.n(i);a.a},"8e9c":function(t,o,s){}}]);