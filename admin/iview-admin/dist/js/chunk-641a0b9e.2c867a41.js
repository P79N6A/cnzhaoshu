(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-641a0b9e"],{"0db5":function(t,s,o){},"26ee":function(t,s,o){"use strict";o.r(s);var a=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",[t.projectInfo?o("Card",[o("div",[o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目："+t._s(t.projectInfo.project_name))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("甲方："+t._s(t.projectInfo.partya_info.company_name))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partya_info.contacts))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partya_info.tel))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("用苗地："+t._s(t.projectInfo.hcity+t.projectInfo.hproper))])])]),o("div",[o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("乙方："+t._s(t.projectInfo.partyb_info.company_name))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partyb_info.contacts))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partyb_info.tel))])]),o("td",[o("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目时间："+t._s(t.projectInfo.project_time))])])])]):t._e(),o("Card",{staticStyle:{width:"600px"}},[o("div",[o("div",[o("div",[t._l(t.uploadList,function(s,a){return o("div",{staticClass:"demo-upload-list"},[[o("img",{attrs:{src:"/admin/"+s}}),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){t.handleView(s)}}}),o("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){t.handleRemove(a)}}})],1)]],2)}),o("Upload",{directives:[{name:"show",rawName:"v-show",value:1!=t.uploadList.length,expression:"uploadList.length !=1"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],multiple:"",type:"drag",action:"/admin/contract_images_upload.php"}},[o("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),o("Row",{staticStyle:{padding:"15px 0"}},[o("Col",{attrs:{span:"8"}},[o("Dropdown",{staticStyle:{width:"300px"},on:{"on-click":t.clickSelect}},[o("Button",{attrs:{type:"primary"}},[t._v("\n                    "+t._s(t.subdata.contract_attr?t.subdata.contract_attr:"选择类型")+"\n                    "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.contract_attr,function(s,a){return o("DropdownItem",{attrs:{name:a}},[t._v(t._s(s))])}),1)],1)],1),o("Col",{attrs:{span:"16"}},[o("Input",{attrs:{type:"textarea",rows:1,placeholder:"图片备注"},model:{value:t.subdata.remark,callback:function(s){t.$set(t.subdata,"remark",s)},expression:"subdata.remark"}})],1)],1),o("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(s){t.visible=s},expression:"visible"}},[t.visible?o("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()])],2)]),o("Button",{attrs:{type:"success",long:""},on:{click:t.subimgwarpshow}},[t._v("上传")])],1)]),o("Card",{staticStyle:{width:"600px"}},[o("div",t._l(t.imgList,function(s,a){return o("Card",[o("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[o("Col",{attrs:{span:"4"}},[o("p",{domProps:{textContent:t._s(s.img_kind)}})]),o("Col",{attrs:{span:"8"}},[o("img",{staticClass:"contract-img",staticStyle:{"border-radius":"5px"},attrs:{src:"/admin/"+s.imgs,alt:""},on:{click:function(o){t.handleView(s.imgs)}}})]),o("Col",{attrs:{span:"8"}},[o("p",{domProps:{textContent:t._s(s.remark)}})]),o("Col",{staticStyle:{"text-align":"right"},attrs:{span:"4"}},[o("Button",{attrs:{type:"primary"},on:{click:function(s){t.tuisong(a)}}},[t._v("推送")])],1)],1)],1)}),1)])],1)])},i=[],e=(o("0a16"),o("bd31")),n=o("7e1e"),c=(o("c276"),o("52c1")),r=o("f55c"),l={components:{expandRow:r["a"]},data:function(){return{projectInfo:{project_id:""},uploadList:[],imgName:"",visible:!1,img_remark:"",contract_attr:{},subdata:{},imgList:[]}},methods:Object(e["a"])({},Object(c["c"])(["setBreadCrumb","setTagNavList","addTag","setLocal","removeTag"]),{tuisong:function(t){var s=this.imgList[t];Object(n["l"])(s).then(function(t){console.log(t)})},clickSelect:function(t){this.$set(this.subdata,"contract_attr",this.contract_attr[t]),this.$set(this.subdata,"contract_index",t)},handleRemove:function(t){var s=this.uploadList;s.splice(t,1),this.uploadList=s},handleView:function(t){this.imgName="/admin/"+t,this.visible=!0},handleSuccess:function(t,s){console.log(t,s),this.uploadList.push(t.data)},subimgwarpshow:function(){var t=this,s={},o=this;console.log(this.uploadList.length,this.subdata.contract_index),0!=this.uploadList.length?(s.imgs=this.uploadList,this.subdata.contract_attr?(s.img_kind=this.subdata.contract_attr,s.project_id=this.projectInfo.project_id,s.remark=this.subdata.remark,Object(n["j"])(s).then(function(a){if(console.log(a.data),0==a.data.status)if(t.$Message.success("上传成功"),t.subdata={},t.uploadList=[],s.contract_imgs_id=a.data.contract_imgs,console.log(o.imgList+"sssss"),o.imgList)o.imgList.push(s);else{var i=[];i.push(s),o.imgList=i}})):this.$Message.warning("请选择类型")):this.$Message.warning("请上传图片")},getImgList:function(){var t=this;Object(n["h"])({project_id:this.projectInfo.project_id}).then(function(s){t.imgList=s.data.data,console.log(t.imgList)}),Object(n["i"])({}).then(function(s){t.contract_attr=s.data})}}),beforeCreate:function(){this.$route.params.projectInfo||this.$router.push({name:"contractList"})},created:function(){this.projectInfo=this.$route.params.projectInfo},mounted:function(){this.getImgList()},beforeDestroy:function(){}},d=l,p=(o("5bde"),o("fc05")),u=Object(p["a"])(d,a,i,!1,null,null,null);s["default"]=u.exports},"5bde":function(t,s,o){"use strict";var a=o("0db5"),i=o.n(a);i.a}}]);