(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5689"],{"26ee":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("Card",[n("div",[n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目："+t._s(t.projectInfo.project_name))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("甲方："+t._s(t.projectInfo.partya_info.company_name))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partya_info.contacts))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partya_info.tel))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("用苗地："+t._s(t.projectInfo.hcity+t.projectInfo.hproper))])])]),n("div",[n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("乙方："+t._s(t.projectInfo.partyb_info.company_name))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("联系人："+t._s(t.projectInfo.partyb_info.contacts))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("电话："+t._s(t.projectInfo.partyb_info.tel))])]),n("td",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("项目时间："+t._s(t.projectInfo.project_time))])])])]),n("Card",{staticStyle:{width:"600px"}},[n("div",[n("div",[n("div",[t._l(t.uploadList,function(e,a){return n("div",{staticClass:"demo-upload-list"},[[n("img",{attrs:{src:"/admin/"+e}}),n("div",{staticClass:"demo-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(n){t.handleView(e)}}}),n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleRemove(a)}}})],1)]],2)}),n("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],multiple:"",type:"drag",action:"http://zhaoshu.com/admin/contract_images_upload.php"}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),n("Row",{staticStyle:{padding:"15px 0"}},[n("Col",{attrs:{span:"8"}},[n("Dropdown",{staticStyle:{width:"300px"},on:{"on-click":t.clickSelect}},[n("Button",{attrs:{type:"primary"}},[t._v("\n                    "+t._s(t.subdata.contract_attr?t.subdata.contract_attr:"选择类型")+"\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.contract_attr,function(e,a){return n("DropdownItem",{attrs:{name:a}},[t._v(t._s(e))])}))],1)],1),n("Col",{attrs:{span:"16"}},[n("Input",{attrs:{type:"textarea",rows:1,placeholder:"图片备注"},model:{value:t.subdata.remark,callback:function(e){t.$set(t.subdata,"remark",e)},expression:"subdata.remark"}})],1)],1),n("Modal",{attrs:{title:"图片预览"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?n("img",{staticStyle:{width:"100%"},attrs:{src:"/admin/"+t.imgName}}):t._e()])],2)]),n("Button",{attrs:{type:"success",long:""},on:{click:t.subimgwarpshow}},[t._v("上传")])],1)]),n("Card",{staticStyle:{width:"600px"}},[n("div",[n("div")])])],1)])},o=[],s=(n("7f7f"),n("c93e")),i=(n("cadf"),n("551c"),n("097d"),n("7e1e")),r=(n("c276"),n("2f62")),c=n("f55c"),l={components:{expandRow:c["a"]},data:function(){return{projectInfo:{},uploadList:[],imgName:"",visible:!1,img_remark:"",contract_attr:{},subdata:{}}},methods:Object(s["a"])({},Object(r["c"])(["setBreadCrumb","setTagNavList","addTag","setLocal","removeTag"]),{clickSelect:function(t){this.$set(this.subdata,"contract_attr",this.contract_attr[t]),this.$set(this.subdata,"contract_index",t)},handleRemove:function(t){console.log(t);var e=this.uploadList;console.log(this.uploadList),e.splice(t,1),this.uploadList=e,console.log(this.uploadList)},handleView:function(t){this.imgName="/admin/"+t,this.visible=!0},handleSuccess:function(t,e){console.log(t,e),this.uploadList.push(t.data)},subimgwarpshow:function(){var t={};console.log(this.uploadList.length,this.subdata.contract_index),0!=this.uploadList.length&&(t.imgs=this.uploadList,this.subdata.contract_attr&&(t.img_kind=this.subdata.contract_attr,t.project_id=this.projectInfo.project_id,t.remark=this.subdata.remark,Object(i["g"])(t).then(function(t){})))}}),created:function(){var t=this;this.projectInfo=this.$route.params.projectInfo,console.log(this.projectInfo),Object(i["f"])({}).then(function(e){t.contract_attr=e.data})},mounted:function(){},beforeDestroy:function(){}},u=l,d=(n("5bde"),n("2877")),p=Object(d["a"])(u,a,o,!1,null,null,null);p.options.__file="contract-img.vue";e["default"]=p.exports},"4b39":function(t,e,n){"use strict";var a=n("58a9"),o=n.n(a);o.a},"58a9":function(t,e,n){},"5bde":function(t,e,n){"use strict";var a=n("8e9c"),o=n.n(a);o.a},"7e1e":function(t,e,n){"use strict";n.d(e,"e",function(){return s}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return d});n("cadf"),n("551c"),n("097d");var a=n("66df"),o=n("c276"),s=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"Calculation.php",data:e,method:"post"})},i=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"contract_list.php",data:e,method:"post"})},r=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"tree_operation.php",data:e,method:"post"})},c=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"update_tender_status.php",data:e,method:"post"})},l=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"update_project_status.php",data:e,method:"post"})},u=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"contract_img_attr.php ",data:e,method:"post"})},d=function(t){var e=Object(o["c"])(t);return a["a"].request({url:"deposit_contract_imgs.php",data:e,method:"post"})}},"8e9c":function(t,e,n){},f55c:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgwarp,expression:"imgwarp"}],staticClass:"img-warp",on:{click:t.closeImgWarp}},[n("div",{staticClass:"img-warp-inner"},[n("Carousel",{staticClass:"dengpostition",attrs:{loop:"",height:667},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.warpImgs,function(e){return n("CarouselItem",{key:t.index},[n("div",{staticClass:"demo-carousel"},[n("img",{attrs:{src:e,alt:""}})])])}))],1)]),t.bidList&&0!=t.bidList.length?n("div",{staticClass:"bind-one"},[n("Tabs",{attrs:{type:"card",size:"small"},on:{"on-click":t.tabclick}},[n("TabPane",{attrs:{label:"待审核"},on:{"on-click":function(e){t.tender_status=1}}}),n("TabPane",{attrs:{label:"已推荐"},on:{"on-click":function(e){t.tender_status=2}}}),n("TabPane",{attrs:{label:"已舍弃"},on:{"on-click":function(e){t.tender_status=3}}})],1),n("div",t._l(t.bidList,function(e,a){return n("Card",{directives:[{name:"show",rawName:"v-show",value:e.tender_status==t.tender_status,expression:"item.tender_status == tender_status"}],key:a},[n("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{staticClass:"left-img-warp",attrs:{span:"3"}},[n("img",{attrs:{src:e.tree_imgs?e.tree_imgs[0]:"",alt:""},on:{click:function(e){t.showImgWarp(a)}}})]),n("Col",{attrs:{span:"17"}},[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v("￥"+t._s(e.tree_price))]),n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_num)+"株")]),n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.tree_address?e.tree_address:"无地址"))]),n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.name:"无姓名"))]),n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"}},[t._v(t._s(e.userinfo?e.userinfo.phone:"无电话"))])]),n("Col",{attrs:{span:"4"}},[n("Button",{directives:[{name:"show",rawName:"v-show",value:2!=e.tender_status,expression:"item.tender_status != 2"}],staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){t.recommend(a)}}},[t._v("\n              推荐\n            ")]),n("Button",{directives:[{name:"show",rawName:"v-show",value:3!=e.tender_status,expression:"item.tender_status != 3"}],attrs:{type:"error"},on:{click:function(e){t.abandon(a)}}},[t._v("舍弃")])],1)],1)],1)}))],1):n("div",[n("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgb(70, 76, 91)"},on:{click:t.changeStatus}},[t._v("无投标信息")])])])},o=[],s=n("7e1e"),i={props:{params:Object},data:function(){return{value1:0,imgwarp:!1,bidList:[],warpImgs:[],abandonValue:"",tender_status:1}},methods:{tabclick:function(t){this.tender_status=t+1},closeImgWarp:function(t){"img-warp-inner"==t.target.className&&(this.imgwarp=!1)},showImgWarp:function(t){var e=this.bidList[t];e.tree_imgs&&(this.warpImgs=e.tree_imgs,this.imgwarp=!0)},abandon:function(t){var e=this;this.abandonValue="",this.$Modal.confirm({title:"舍弃理由",render:function(t){return t("Input",{props:{value:e.abandonValue,autofocus:"autofocus",placeholder:"请输入舍弃理由!"},on:{input:function(t){e.abandonValue=t}}})},onOk:function(){""==e.abandonValue?e.$Message.warning({content:"请填写舍弃理由！"}):e.changeStatus(t,!1)}}),setTimeout(function(){document.getElementsByClassName("ivu-input")[0].focus()},100)},recommend:function(t){var e=this;this.$Modal.confirm({title:"推荐",content:"确定推荐本条投标吗？","ok-text":"推荐",onOk:function(){e.changeStatus(t,!0)}})},changeStatus:function(t,e){var n=this,a=this.bidList[t],o={tender_order_id:a.tender_order_id,status:e?2:3,remark:e?"":this.abandonValue};Object(s["a"])(o).then(function(a){0==a.data.status?(n.$Message.success({content:"操作成功"}),n.$set(n.bidList[t],"tender_status",e?2:3),n.$emit("changTotal_sum",n.params.index,t,e?2:3)):n.$Message.warning({content:"服务器繁忙"})})}},mounted:function(){this.bidList=this.params.row.tender_info,console.log(this.params.row.tender_info)},directives:{focus:{inserted:function(t){t.focus()}}}},r=i,c=(n("4b39"),n("2877")),l=Object(c["a"])(r,a,o,!1,null,"9fd8082a",null);l.options.__file="project-info-extend.vue";e["a"]=l.exports}}]);