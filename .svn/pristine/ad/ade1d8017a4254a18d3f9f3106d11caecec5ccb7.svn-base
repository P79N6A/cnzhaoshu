{"remainingRequest":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\zhaoshuwang\\admin\\iview-admin\\src\\view\\project\\project-info\\project-info-extend.vue?vue&type=style&index=0&id=28d8eb0f&scoped=true&lang=css&","dependencies":[{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\src\\view\\project\\project-info\\project-info-extend.vue","mtime":1536820014896},{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1536566309539},{"path":"D:\\zhaoshuwang\\admin\\iview-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.img-warp{\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(1,1,1,.5);\n  z-index: 10000;\n}\n.img-warp-inner{\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  height: 667px;\n}\n.demo-carousel img{\n  height: 667px;\n}\n.dengpostition{\n  position: relative;\n  margin: 0 auto;\n  width: 375px;\n  margin-top: 50px;\n}\n.left-img-warp{\n  height: 60px;\n}\n.left-img-warp img{\n  height: 60px;\n  padding-left: 20px;\n}\n.bind-one span{\n  margin-right: 20px;\n}\n.bind-one Card{\n  height: 65px;\n}\n",{"version":3,"sources":["project-info-extend.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"project-info-extend.vue","sourceRoot":"src\\view\\project\\project-info","sourcesContent":["<style scoped>\n  .img-warp{\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(1,1,1,.5);\n    z-index: 10000;\n  }\n  .img-warp-inner{\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    height: 667px;\n  }\n  .demo-carousel img{\n    height: 667px;\n  }\n  .dengpostition{\n    position: relative;\n    margin: 0 auto;\n    width: 375px;\n    margin-top: 50px;\n  }\n  .left-img-warp{\n    height: 60px;\n  }\n  .left-img-warp img{\n    height: 60px;\n    padding-left: 20px;\n  }\n  .bind-one span{\n    margin-right: 20px;\n  }\n  .bind-one Card{\n    height: 65px;\n  }\n</style>\n<template>\n  <div>\n    <div class=\"img-warp\" v-show=\"imgwarp\" @click=\"closeImgWarp\">\n      <div class=\"img-warp-inner\">\n        <Carousel v-model=\"value1\" loop :height=\"667\" class=\"dengpostition\">\n          <CarouselItem v-for=\"item in warpImgs\">\n            <div class=\"demo-carousel\"><img :src=\"item\" alt=\"\"></div>\n          </CarouselItem>\n        </Carousel>\n      </div>\n\n    </div>\n    <div class=\"bind-one\">\n      <Tabs type=\"card\" size=\"small\" @on-click=\"tabclick\">\n        <TabPane @on-click=\"tender_status = 1\" label=\"待审核\">\n        </TabPane>\n        <TabPane @on-click=\"tender_status = 2\" label=\"已推荐\">\n        </TabPane>\n        <TabPane @on-click=\"tender_status = 3\" label=\"已舍弃\">\n        </TabPane>\n      </Tabs>\n      <div>\n        <Card v-for=\"(item,index) in bidList\" v-show=\"item.tender_status == tender_status\">\n          <Row type=\"flex\" justify=\"center\" align=\"middle\" class=\"code-row-bg\">\n            <Col span=\"3\" class=\"left-img-warp\" ><img @click=\"showImgWarp(index)\" :src=\"item.tree_imgs?item.tree_imgs[0]:''\"alt=\"\"></Col>\n            <Col span=\"17\">\n              <span style=\"font-size: 14px; font-weight: bold; color: rgb(70, 76, 91);\">￥{{item.tree_price}}</span>\n              <span style=\"font-size: 14px; font-weight: bold; color: rgb(70, 76, 91);\">{{item.tree_num}}株</span>\n              <span style=\"font-size: 14px; font-weight: bold; color: rgb(70, 76, 91);\">{{item.tree_address?item.tree_address:'无地址'}}</span>\n              <span style=\"font-size: 14px; font-weight: bold; color: rgb(70, 76, 91);\">{{item.userInfo?item.userInfo:'无姓名'}}</span>\n              <span style=\"font-size: 14px; font-weight: bold; color: rgb(70, 76, 91);\">{{item.userInfo?item.userInfo:'无电话'}}</span>\n            </Col>\n            <Col span=\"4\">\n              <Button type=\"info\"v-show=\"item.tender_status != 2\" style=\"margin-right: 30px\" @click=\"recommend(index)\">推荐</Button>\n              <Button type=\"error\" v-show=\"item.tender_status != 3\" @click=\"abandon(index)\">舍弃</Button>\n            </Col>\n          </Row>\n        </Card>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { changeBidStatus } from '@/api/data'\n    export default {\n      name: \"project-info-extend\",\n      props: {\n        params: Object\n      },\n      data () {\n        return {\n          value1: 0,\n          imgwarp:false,\n          bidList:[],\n          warpImgs:[],\n          abandonValue:\"\",\n          tender_status:1\n\n        }\n      },\n      methods: {\n        tabclick(name){\n          this.tender_status = name+1;\n        },\n        closeImgWarp(e){\n          if(e.target.className != \"img-warp-inner\")return\n          this.imgwarp =false\n        },\n        showImgWarp(index){\n          let bidOne = this.bidList[index];\n          if(!bidOne.tree_imgs){\n            return\n          }\n          this.warpImgs = bidOne.tree_imgs;\n          this.imgwarp = true\n        },\n        abandon(index){\n          this.abandonValue = \"\";\n          this.$Modal.confirm({\n            title:\"舍弃理由\",\n            render: (h) => {\n              return h('Input', {\n                props: {\n                  value: this.abandonValue,\n                  autofocus: \"autofocus\",\n                  placeholder: '请输入舍弃理由!'\n                },\n                on: {\n                  input: (val) => {\n                    this.abandonValue = val;\n                  }\n                }\n              })\n            },\n            onOk:()=>{\n              if(this.abandonValue ==\"\"){\n                this.$Message.warning({\n                  content:\"请填写舍弃理由！\"\n                })\n              }else{\n                this.changeStatus(index,false)\n              }\n            }\n          })\n          //解决框架自行获取焦点Bug\n          setTimeout(function () {\n            document.getElementsByClassName(\"ivu-input\")[0].focus()\n          },100)\n\n        },\n        recommend(index){\n          this.$Modal.confirm({\n            title: \"推荐\",\n            content:\"确定推荐本条投标吗？\",\n            \"ok-text\":\"推荐\",\n            onOk:() =>{\n              this.changeStatus(index,true)\n            }\n\n          })\n        },\n        changeStatus(index,is){\n          let bidOne = this.bidList[index];\n          let data = {\n            tender_order_id:bidOne.tender_order_id,\n            status:is?2:3,\n            remark:is?\"\":this.abandonValue\n          }\n          changeBidStatus(data).then(res =>{\n            if (res.data.status == 0){\n              this.$Message.success({\n                content: \"操作成功\",\n              })\n              this.$set(this.bidList[index],\"tender_status\",is?2:3);\n            }else{\n              this.$Message.warning({\n                content:\"服务器繁忙\"\n              })\n            }\n          })\n        }\n      },\n      mounted(){\n        this.bidList = this.params.row.bid_list\n      },\n      directives: {\n        focus: {\n          // 指令的定义\n          inserted: function (el) {\n            el.focus()\n          }\n        }\n      }\n\n    }\n</script>\n\n\n"]}]}