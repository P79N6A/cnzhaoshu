(function(c){c.fn.autocomplete=function(d){var e=-1;d=c.extend({minLength:1,source:[],select:function(a){return a},search:function(a){return a},label:function(a){return a},blur:function(a){}},d);var b=this,f=c("<ul></ul>").addClass("proposal-list").css("width",b.outerWidth()).css("top",b.outerHeight()+b.offset().top).css("left",b.offset().left);c("body").append(f);b.keydown(function(a){switch(a.which){case 38:a.preventDefault();c("ul.proposal-list li").removeClass("selected");0<=e-1?(e--,a=c("ul.proposal-list li:eq("+
e+")").addClass("selected").html(),b.val(a)):e=-1;break;case 40:a.preventDefault();e<d.source.length-1&&(c("ul.proposal-list li").removeClass("selected"),e++,a=c("ul.proposal-list li:eq("+e+")").addClass("selected").html(),b.val(a));break;case 13:-1<e&&(a=c("ul.proposal-list li:eq("+e+")").html(),b.val(a),d.select(a));f.empty().hide();break;case 27:f.empty().hide(),b.val("")}});b.bind("keyup",function(a){if(13!=a.which&&27!=a.which&&38!=a.which&&40!=a.which&&(e=-1,f.empty().hide(),b.val().length>=
d.minLength)){f.empty().hide();for(var g in d.source)(new RegExp(b.val(),"i")).test(d.search(d.source[g]))&&(a=c("<li></li>").html(d.label(d.source[g])).addClass("proposal").mousedown(function(){var a=c(this).html();b.val(a);d.select(a);f.empty().hide()}).mouseenter(function(){c(this).addClass("selected")}).mouseleave(function(){c(this).removeClass("selected")}),f.append(a));f.length&&(f.show().children().first().addClass("selected"),e=0)}});b.blur(function(a){f.hide();d.blur(a)});return this}})(jQuery);