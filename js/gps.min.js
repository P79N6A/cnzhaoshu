(function(){window.GPS={PI:3.141592653589793,x_pi:52.35987755983,delta:function(a,b){var c=this.transformLat(b-105,a-35);b=this.transformLon(b-105,a-35);a=a/180*this.PI;var d=Math.sin(a),d=1-.006693421622965943*d*d,e=Math.sqrt(d),c=180*c/(6335552.717000426/(d*e)*this.PI);b=180*b/(6378245/e*Math.cos(a)*this.PI);return{lat:c,lng:b}},gps2gcj:function(a,b){var c=this.delta(a,b);return{lat:a+c.lat,lng:b+c.lng}},gcj2bd:function(a,b){var c=Math.sqrt(b*b+a*a)+2E-5*Math.sin(a*this.x_pi);a=Math.atan2(a,b)+
3E-6*Math.cos(b*this.x_pi);bdLon=c*Math.cos(a)+.0065;bdLat=c*Math.sin(a)+.006;return{lat:bdLat,lng:bdLon}},bd2gcj:function(a,b){b-=.0065;var c=a-.006;a=Math.sqrt(b*b+c*c)-2E-5*Math.sin(c*this.x_pi);b=Math.atan2(c,b)-3E-6*Math.cos(b*this.x_pi);return{lat:a*Math.sin(b),lng:a*Math.cos(b)}},distance:function(a,b,c,d){a=Math.cos(a*this.PI/180)*Math.cos(c*this.PI/180)*Math.cos((b-d)*this.PI/180)+Math.sin(a*this.PI/180)*Math.sin(c*this.PI/180);1<a&&(a=1);-1>a&&(a=-1);return 6371E3*Math.acos(a)},transformLat:function(a,
b){var c=-100+2*a+3*b+.2*b*b+.1*a*b+.2*Math.sqrt(Math.abs(a)),c=c+2*(20*Math.sin(6*a*this.PI)+20*Math.sin(2*a*this.PI))/3,c=c+2*(20*Math.sin(b*this.PI)+40*Math.sin(b/3*this.PI))/3;return c+=2*(160*Math.sin(b/12*this.PI)+320*Math.sin(b*this.PI/30))/3},transformLon:function(a,b){b=300+a+2*b+.1*a*a+.1*a*b+.1*Math.sqrt(Math.abs(a));b+=2*(20*Math.sin(6*a*this.PI)+20*Math.sin(2*a*this.PI))/3;b+=2*(20*Math.sin(a*this.PI)+40*Math.sin(a/3*this.PI))/3;return b+=2*(150*Math.sin(a/12*this.PI)+300*Math.sin(a/
30*this.PI))/3},angle2decimal:function(a,b){var c=0<a.length?this.fraction2decimal(a[0]):0,d=1<a.length?this.fraction2decimal(a[1]):0;a=2<a.length?this.fraction2decimal(a[2]):0;c=c+d/60+a/3600;if("W"==b||"S"==b)c*=-1;return c},fraction2decimal:function(a){a=a.split("/");return 0>=a.length?0:1==a.length?parseFloat(a[0]):parseFloat(a[0])/parseFloat(a[1])},qqGps:function(a,b,c,d){a=this.angle2decimal(a.split(","),b);c=this.angle2decimal(c.split(","),d);c=this.gps2gcj(a,c);return[c.lat.toFixed(7),c.lng.toFixed(7)]}}})();